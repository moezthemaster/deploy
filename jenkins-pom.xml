<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.packt.samples</groupId>
<artifactId>com.packt.samples.archetype</artifactId>
<packaging>jar</packaging>
<version>1.0.0</version>
<name>com.packt.samples.archetype</name>

<properties>
  <maven.deploy.skip>true</maven.deploy.skip>
  <deployit.plugin.version>5.0.1</deployit.plugin.version>
  <deployit.server>10.0.2.15</deployit.server>
  <deployit.port>4516</deployit.port>
  <deployit.credentials>adm-creds</deployit.credentials>
  <deployit.environmentId>Environments/DEV_LOCAL</deployit.environmentId>
</properties>

<build>
  <pluginManagement>
    <plugins>
	  <plugin>
	    <groupId>com.xebialabs.xldeploy</groupId>
		<artifactId>com.xebialabs.xldeploy</artifactId>
		<version>${deployit.plugin.version}</version>
	  </plugin>
	</plugins>
  </pluginManagement>
</build>

<profiles>
  <profile>
    <id>build-dar</id>
	<activation>
	  <property>
	    <name>!deactivatesDeployit</name>
	  </property>
	</activation>
	<build>
	  <plugins>
	    <plugin>
		  <groupId>com.xebialabs.xldeploy</groupId>
		  <artifactId>com.xebialabs.xldeploy</artifactId>
		  <configuration>
		    <environmentId>${deployit.environmentId}</environmentId>
			<serverAddress>${deployit.server}</serverAddress>
			<port>${deployit.port}</port>
			<deployables>
			  <file.Folder name="deploy shell files">
			    <targetPathShared>true</targetPathShared>
				<targetPathSharedSubDirectories>true</targetPathSharedSubDirectories>
				<scanPlaceholders>false</scanPlaceholders>
				<targetPath>/tmp/test</targetPath>
				<createTargetPath>true</createTargetPath>
				<location>scripts</location>
				<createOrder>71</createOrder>
				<modifyOrder>71</modifyOrder>
				<tags>
				  <value>deploy-tools</value>
				</tags>
			  </file.Folder>
			</deployables>
		  </configuration>
		</plugin>
	  </plugins>
	</build>
  </profile>
  <profile>
    <id>do-package</id>
	<activation>
	  <property>
	    <name>doPackage</name>
	  </property>
	</activation>
	<build>
	  <plugins>
	    <plugin>
		  <groupId>com.xebialabs.xldeploy</groupId>
		  <artifactId>com.xebialabs.xldeploy</artifactId>
		  <executions>
		    <execution>
			  <id>dar-packaging</id>
			  <phase>package</phase>
			  <goals>
			    <goal>generate-deployement-package</goal>
			  </goals>
			</execution>
		  </executions>
		</plugin>
	  </plugins>
	</build>
  </profile>
  
  
    <profile>
    <id>do-import</id>
	<activation>
	  <property>
	    <name>doImport</name>
	  </property>
	</activation>
	<build>
	  <plugins>
	    <plugin>
		  <groupId>com.xebialabs.xldeploy</groupId>
		  <artifactId>com.xebialabs.xldeploy</artifactId>
		  <executions>
		    <execution>
			  <id>import</id>
			  <phase>pre-integration-test</phase>
			  <goals>
			    <goal>import</goal>
			  </goals>
			</execution>
		  </executions>
		</plugin>
	  </plugins>
	</build>
  </profile>
</profiles>

<dependencies>
 <dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
 </dependency>
</dependencies>
</project>

